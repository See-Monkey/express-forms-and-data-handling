<!DOCTYPE html>
<html>
<head>
  <title><%= title %></title>
</head>
<body>
  <h1><%= title %></h1>

  <div class="searchContainer">
    <h4>Search:</h4>
    <form action="/search" method="GET">
      <div class="nameContainer">
				<label for="firstName">First Name: </label>
        <input
					type="text"
					name="firstName"
					id="firstName"
				/>
        <label for="lastName">Last Name: </label>
				<input
					type="text"
					name="lastName"
					id="lastName"
				/>
			</div>
			<div class="emailContainer">
        <label for="email">Email Address: </label>
				<input type="email" name="email" id="email" />
      </div>
      <button type="submit">Search</button>
    </form>
  </div>

  <% if (locals.users.length > 0) { %><h4>Users:</h4><% } %>
  <ul>
    <% if (locals.users) {%>
    <% users.forEach(function(user) { %>
      <div>
        <li>ID: <%= user.id %> | Name: <%= user.firstName %> <%= user.lastName %></li>
        <li>Email Address: <%= user.email %><% if (user.age) {%> | Age: <%= user.age %><% } %></li>
        <% if (user.bio) {%><li>Bio: <%= user.bio %></li><% } %>
      </div>
      <a href="/<%= user.id %>/update">Update</a>
      <!-- This time we're sending a POST request to our route, so we need a form. -->
      <form action="/<%= user.id %>/delete" method="POST" style="display:inline;">
        <button type="submit" onclick="return confirm('Are you sure you want to delete this user?');">Delete</button>
      </form>
    <% }); %>
  <% } %>
  </ul>
  
  <a href="/create">Create a user</a>
</body>
</html>
